# Untitled

---

## TCP에서 데이터 경계가 없는 이유

- **스트림 지향(Stream-oriented) 프로토콜**
    
    TCP는 데이터를 “패킷 단위”로 다루는 것이 아니라, 바이트(byte)들의 연속된 흐름(stream)으로 취급.
    
    즉, 송신 측에서 보낸 `send()` 호출 한 번이 반드시 수신 측에서 `recv()` 한 번으로 동일하게 매칭되는 게 아님.
    
- **세그먼트 분할과 병합**
    
    네트워크 상황에 따라 송신 측에서 보낸 데이터가 여러 TCP 세그먼트로 나뉘거나, 여러 번 보낸 것이 수신 측에서 합쳐져서 전달될 수 있음.
    
- **애플리케이션 책임**
    
    따라서 TCP 위에서 동작하는 애플리케이션(예: HTTP, SMTP 등)은 **메시지 경계(message boundary)** 를 직접 정의해야 함.
    
    두 가지 방식
    
    1. **길이 기반 프로토콜**: 메시지 앞부분에 “길이 필드”를 붙여서 어디까지가 한 메시지인지 알 수 있게 함. (예: HTTP/2, Protobuf 등)
    2. **구분자 기반 프로토콜**: 줄바꿈 문자(`\n`)나 특정 토큰으로 메시지를 구분. (예: 텍스트 기반 프로토콜인 HTTP/1.1 헤더, SMTP)

---

## 예시

송신 측에서:

```python
sock.send(b"Hello")
sock.send(b"World")

```

수신 측에서:

```python
data = sock.recv(1024)
print(data)

```

출력은 **`b"HelloWorld"`**일 수도 있고,

**`b"Hello"`**와 **`b"World"`**로 따로따로 들어올 수도 있음.

즉, TCP는 경계를 보장하지 않고 단순히 데이터 흐름을 이어주는 역할만 함.

---

TCP는 **신뢰성(reliability)** 과 **순서(ordering)** 는 보장하지만, **데이터 경계(boundary)** 는 보존하지 않음.

그래서 **애플리케이션 레벨 프로토콜**에서 별도의 경계 구분 방식을 설계해야 함.

---

## UDP에서 데이터 경계가 있는 이유

- **메시지 지향(Message-oriented) 프로토콜**
    
    UDP는 TCP와 달리 “스트림”이 아니라 **데이터그램(datagram)** 단위로 통신
    
    즉, 송신자가 보낸 한 번의 `sendto()` 호출 = 수신자가 받는 `recvfrom()` 호출과 **1:1 매칭**.
    
- **경계 보존**
    
    수신 측에서는 `recvfrom()`을 호출할 때, 송신자가 보낸 **한 개의 UDP 패킷**을 그대로 받음.
    
    패킷이 잘리지도, 합쳐지지도 않음.
    
    (단, 패킷 크기가 MTU를 초과하면 IP 단에서 단편화(fragmentation)가 일어나고, 재조립 실패 시 손실될 수 있음.)
    
- **손실 가능성**
    
    TCP는 신뢰성 있는 연결을 보장하지만, UDP는 **손실(loss)**, **중복(duplication)**, **순서 뒤바뀜(out-of-order)** 을 허용.
    
    즉, **경계는 보존하지만 신뢰성은 보장하지 않는다**는 차이.
    

---

## 예시

송신 측 (UDP):

```python
sock.sendto(b"Hello", addr)
sock.sendto(b"World", addr)

```

수신 측:

```python
data, addr = sock.recvfrom(1024)
print(data)
data, addr = sock.recvfrom(1024)
print(data)

```

출력은 항상:

```
b"Hello"
b"World"

```

 TCP와 달리, 절대 `b"HelloWorld"`로 합쳐지거나 분리되지 않음.

---

## TCP vs UDP 정리

| 특징 | TCP | UDP |
| --- | --- | --- |
| 지향성 | 스트림 지향 | 메시지(데이터그램) 지향 |
| 데이터 경계 | ❌ 구분 안 함 | ✅ 구분함 |
| 신뢰성 | 있음 (재전송, 순서 보장) | 없음 (손실, 중복, 순서 바뀔 수 있음) |
| 속도 | 상대적으로 느림 | 빠름 |
| 사용 예시 | HTTP, FTP, SMTP | DNS, VoIP, 게임, 스트리밍 |

---

 보통 **메시지 단위 통신**을 간단히 하고 싶으면 UDP, **신뢰성이 중요한 경우**엔 TCP 사용.

---

 TCP와 UDP의 **데이터 경계 처리 차이**

---

## TCP

- 스트림 지향 (byte stream)
- **데이터 경계 없음** → 애플리케이션이 직접 구분자/길이 정보 넣어야 함
- 여러 번 `send()`한 데이터가 합쳐져서 도착할 수도 있고, 쪼개져서 도착할 수도 있음
- 신뢰성 보장: 순서 유지, 재전송, 흐름 제어, 혼잡 제어 지원
- 예시: 웹(HTTP/HTTPS), 파일전송(FTP), 이메일(SMTP)

---

## UDP

- 메시지 지향 (datagram)
- **데이터 경계 있음** → 송신한 1개의 패킷이 수신 시에도 1개의 패킷으로 그대로 도착
- 패킷이 합쳐지거나 분리되지 않음
- 신뢰성 없음: 손실, 중복, 순서 뒤바뀜 가능
- 예시: DNS, 스트리밍, 온라인 게임, VoIP

---

- **TCP** → “경계 없음, 신뢰성 O”
- **UDP** → “경계 있음, 신뢰성 X”

---
